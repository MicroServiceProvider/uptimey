var action,globalFile,globalLocation,globalSunrise,globalSunset,output,projectLink,ref;projectLink="https://github.com/stefanbc/uptimey",ref="",globalLocation=ref.globalLocation,globalSunrise=ref.globalSunrise,globalSunset=ref.globalSunset,globalFile="./core/client/lib/controllers/maincontroller.php",action=function(a){var b,c,d,e,f;switch(d="",a){case"toggle":d=$(".toggle-button").attr("data-status"),"closed"===d?($(".button-container").animate({top:0}),$(".toggle-button").attr("data-status","open"),$(".toggle-button").removeClass("fa-angle-double-down"),$(".toggle-button").addClass("fa-angle-double-up")):"open"===d&&($(".button-container").animate({top:"-80px"}),$(".toggle-button").attr("data-status","closed"),$(".toggle-button").removeClass("fa-angle-double-up"),$(".toggle-button").addClass("fa-angle-double-down"));break;case"adv":$(".adv-button").addClass("pulse"),$(".adv-button").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("pulse")}),d=$(".adv-button").attr("data-status"),"default"===d?($(".adv-button").attr("data-status","advanced"),$(".adv-button").addClass("active"),$(".default-panel").fadeOut(500),$(".advanced-panel").fadeIn(500),$.ajax(globalFile,{method:"GET",data:{action:"advanced",flag:"advanced"},success:function(a){$(".advanced-panel .top-container").html(a)}})):"advanced"===d&&($(".adv-button").attr("data-status","default"),$(".adv-button").removeClass("active"),$(".advanced-panel").fadeOut(500),$(".default-panel").fadeIn(500));break;case"refresh":$(".refresh-button").addClass("fa-spin"),output("uptime","refresh"),output("time","refresh"),setTimeout(function(){$(".refresh-button").removeClass("fa-spin")},1e3);break;case"twitter":$(".twitter-button").addClass("pulse"),$(".twitter-button").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("pulse")}),f="",0!==$("#days").attr("data-value")&&(f+=$("#days").attr("data-value")+" days "),0!==$("#hours").attr("data-value")&&(f+=$("#hours").attr("data-value")+" hours "),0!==$("#minutes").attr("data-value")&&(f+=$("#minutes").attr("data-value")+" minutes"),e=f+" server uptime. Can you beat this? via",b="uptimey,devops",window.open("http://twitter.com/share?url="+projectLink+"&text="+e+"&hashtags="+b+"&","twitterwindow","height=450, width=550, top="+$(window).height()/2-225+", left="+$(window).width()/2+", toolbar=0, location=0, menubar=0, directories=0, scrollbars=0");break;case"screenshot":c=$(".screenshot-button"),c.addClass("pulse"),c.on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("pulse")}),c.hasClass("fa-camera")?(c.removeClass("fa-camera").addClass("fa-download"),html2canvas(document.body,{onrendered:function(a){var b,d;b=a.toDataURL("image/png").replace("image/png","image/octet-stream"),c.attr("href",b),d=moment().format("DDMMYYYYHHmmss"),c.attr("download","Screenshot_"+d+".png")}})):setTimeout(function(){return c.removeClass("fa-download").addClass("fa-camera"),c.removeAttr("href").removeAttr("download")},3e3);break;case"clear":$.ajax(globalFile,{method:"GET",data:{action:"clear"}})}},output=function(a,b){switch(a){case"image":$.ajax(globalFile,{method:"GET",data:{action:a},success:function(a){var b;a=a.split(";"),$("body").css("backgroundImage","url("+a[0]+")"),b="Built using Uptimey. Fork on <a href='"+projectLink+"'>Github</a>. Image by Unsplash.",$("#copy").html(b)}});break;case"location":$.ajax(globalFile,{method:"GET",data:{action:a},success:function(a){var b;b="http://ipinfo.io/"+a,$.getJSON(b,function(a){var b;$("#location").text(a.city+", "+a.region+", "+a.country).addClass("fadeIn"),b=a.loc.split(","),$("#location").attr("data-latlong",b[0]+"+"+b[1]),globalLocation=a.city+", "+a.region+", "+a.country,$.simpleWeather({location:globalLocation,success:function(a){globalSunrise=a.sunrise,globalSunset=a.sunset}})}),$(".location-inner").addClass("fadeIn")}});break;case"uptime":$.ajax(globalFile,{method:"GET",data:{action:a,flag:b},success:function(a){a=a.split(";"),$("#days").text(a[0]).addClass("fadeIn"),$("#days").attr("data-value",a[0]),$("#hours").text(a[1]).addClass("fadeIn"),$("#hours").attr("data-value",a[1]),$("#minutes").text(a[2]).addClass("fadeIn"),$("#minutes").attr("data-value",a[2]),$(".bottom-container").addClass("fadeIn")}});break;case"time":$.ajax(globalFile,{method:"GET",data:{action:a,flag:b},success:function(a){a=a.split(";"),$("#current").text(a[0]).addClass("fadeIn"),$("#time").text(a[1]).addClass("fadeIn"),$("#since").text(a[2]).addClass("fadeIn"),setTimeout(function(){var b,c,d;b=moment(globalSunrise,"h:m a").format("X"),c=moment(globalSunset,"h:m a").format("X"),d=moment(a[1],"h:m a").format("X"),d>=b&&c>=d?($(".time .fa").removeClass("fa-moon-o fa-circle-o"),$(".time .fa").addClass("fa-sun-o")):($(".time .fa").removeClass("fa-sun-o fa-circle-o"),$(".time .fa").addClass("fa-moon-o"))},3e3),$(".top-container").addClass("fadeIn")}})}$(".val").each(function(){$(this).on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("fadeIn")})})},$(document).ready(function(){$(".top-container").addClass("animated"),$(".bottom-container").addClass("animated"),$(".val").addClass("animated"),$(".button").addClass("animated"),output("image"),output("location"),output("uptime"),output("time"),setInterval(function(){output("uptime"),output("time")},6e4),$(".button").each(function(){$(this).on("click",function(){var a;a=$(this).attr("data-action"),action(a)})}),$("#location").on("click",function(){var a;a=$(this).attr("data-latlong"),window.location.href="https://www.google.com/maps/place/"+a})});