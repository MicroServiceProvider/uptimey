(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;q="https://github.com/stefanbc/uptimey",i="./client/lib/models/data.php",h="./client/bin/config.js",r="./client/bin/settings.json",n=require("moment"),k=require("humane"),a="",b="",c="",o=function(a){return k.log(a,{timeout:5e3,baseCls:"humane-libnotify"})},f=function(a){return $(a).addClass("pulse"),$(a).on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("pulse")})},g=function(a,b,c){return $(a).removeClass(b).addClass(c)},m=function(a){return!isNaN(parseFloat(a))},j=function(a){var b,c;if("number"==typeof a||"boolean"==typeof a)return!1;if("undefined"==typeof a||null===a)return!0;if("undefined"!=typeof a.length)return 0===a.length;b=0;for(c in a)a.hasOwnProperty(c)&&b++;return 0===b},d=function(a){var b,c,d,e,h,j,k,l;switch(j="",a){case"toggle":if(j=$(".toggle-button").attr("data-status"),b=$(".toggle-button").parent().attr("data-position"),"closed"===j)switch($(".button-container").animate((d={},d[""+b]=0,d)),$(".toggle-button").attr("data-status","open"),b){case"top":g(".toggle-button","fa-angle-double-down","fa-angle-double-up");break;case"bottom":g(".toggle-button","fa-angle-double-up","fa-angle-double-down")}else if("open"===j)switch($(".button-container").animate((e={},e[""+b]="-80px",e)),$(".toggle-button").attr("data-status","closed"),b){case"top":g(".toggle-button","fa-angle-double-up","fa-angle-double-down");break;case"bottom":g(".toggle-button","fa-angle-double-down","fa-angle-double-up")}break;case"advanced":f(".advanced-button"),j=$(".advanced-button").attr("data-status"),"default"===j?($(".advanced-button").attr("data-status","advanced"),$(".advanced-button").addClass("active"),$(".default-panel").fadeOut(500),$(".advanced-panel").fadeIn(500),$.ajax(i,{method:"GET",data:{action:"advanced",flag:"advanced"},success:function(a){$(".advanced-panel .top-container").html(a)}})):"advanced"===j&&($(".advanced-button").attr("data-status","default"),$(".advanced-button").removeClass("active"),$(".advanced-panel").fadeOut(500),$(".default-panel").fadeIn(500));break;case"refresh":$(".refresh-button").addClass("fa-spin"),p("uptime","refresh"),p("time","refresh"),p("ping"),setTimeout(function(){$(".refresh-button").removeClass("fa-spin")},1e3);break;case"twitter":f(".twitter-button"),l="",0!==$("#days").attr("data-value")&&(l+=$("#days").attr("data-value")+" days "),0!==$("#hours").attr("data-value")&&(l+=$("#hours").attr("data-value")+" hours "),0!==$("#minutes").attr("data-value")&&(l+=$("#minutes").attr("data-value")+" minutes"),k=l+" server uptime. Can you beat this? via",c="uptimey,devops",window.open("http://twitter.com/share?url="+q+"&text="+k+"&hashtags="+c+"&","twitterwindow","height=450, width=550, top="+($(window).height()/2-225)+", left="+$(window).width()/2+", toolbar=0, location=0, menubar=0, directories=0, scrollbars=0");break;case"google-plus":f(".google-plus-button"),o("Feature still in development");break;case"facebook":f(".facebook-button"),o("Feature still in development");break;case"screenshot":h=$(".screenshot-button"),f(h),h.hasClass("fa-camera")?(h.removeClass("fa-camera").addClass("fa-download"),html2canvas(document.body,{onrendered:function(a){var b,c;b=a.toDataURL("image/png").replace("image/png","image/octet-stream"),h.attr("href",b),c=n().format("DDMMYYYYHHmmss"),h.attr("download","Screenshot_"+c+".png")}})):setTimeout(function(){return h.removeClass("fa-download").addClass("fa-camera"),h.removeAttr("href").removeAttr("download")},3e3);break;case"clear":$.ajax(i,{method:"GET",data:{action:"clear"}})}},s=function(){var a;return a=document.createElement("style"),a.appendChild(document.createTextNode("")),document.head.appendChild(a),a.sheet}(),e=function(a,b,c){"insertRule"in a?a.insertRule(b+"{"+c+"}",a.cssRules.length):"addRule"in a&&a.addRule(b,c,a.cssRules.length)},h=function(){$.ajax(i,{method:"GET",data:{action:"override",flag:"override"},error:function(a){return console.log(a)},success:function(a){var b,c,f,i;if(h=$.parseJSON(a),j(h.background_color)||(b="background-color: "+h.background_color+";"),j(h.font_family)||(b+="font-family: "+h.font_family+";"),j(h.font_color)||(b+="color: "+h.font_color+";"),e(s,"body",b),$.each(h.buttons[0],function(a,b){var c;b===!1&&(c="display: none",e(s,"."+a+"-button",c))}),"advanced"===h.default_view&&d("advanced"),"top"!==h.menu_placement)switch(c="overflow: hidden",e(s,".container",c),$(".button-container").removeClass("top-menu").addClass(h.menu_placement+"-menu"),$(".button-container").attr("data-position",""+h.menu_placement),h.menu_placement){case"bottom":g(".toggle-button","fa-angle-double-down","fa-angle-double-up"),$(".button-container .toggle-button").insertBefore(".button-container .button-block")}h.remove_menu===!0&&(i="display: none",e(s,".button-container",i)),h.show_location===!1&&(f="display: none",e(s,".location-inner",f)),h.show_menu_always===!0&&d("toggle")}})},p=function(d,e){var f;switch(d){case"image":$.ajax(i,{method:"GET",data:{action:d},success:function(a){a=a.split(";"),$("body").css("backgroundImage","url("+a[0]+")")}}),f="Made with <a href='"+q+"' target='_blank'>Uptimey</a>. ",f+="Image from <a href='http://unsplash.com' target='_blank'>Unsplash</a>.",$("#copy").html(f);break;case"location":$.ajax(i,{method:"GET",data:{action:d},success:function(d){var e;e="http://ipinfo.io/"+d,$.getJSON(e,function(d){var e;$("#location").text(d.city+", "+d.region+", "+d.country).addClass("fadeIn"),e=d.loc.split(","),$("#location").attr("data-latlong",e[0]+"+"+e[1]),a=d.city+", "+d.region+", "+d.country,$.simpleWeather({location:a,success:function(a){b=a.sunrise,c=a.sunset}})}),$(".location-inner").addClass("fadeIn")}});break;case"uptime":$.ajax(i,{method:"GET",data:{action:d,flag:e},success:function(a){a=a.split(";"),$("#days").text(a[0]).addClass("fadeIn"),$("#days").attr("data-value",a[0]),$("#hours").text(a[1]).addClass("fadeIn"),$("#hours").attr("data-value",a[1]),$("#minutes").text(a[2]).addClass("fadeIn"),$("#minutes").attr("data-value",a[2]),$(".bottom-container").addClass("fadeIn")}});break;case"time":$.ajax(i,{method:"GET",data:{action:d,flag:e},success:function(a){var d;a=a.split(";"),$("#current").text(a[0]).addClass("fadeIn"),d=a[1].split(":"),$("#time").html(d[0]+"<span class='blink'>:</span>"+d[1]).addClass("fadeIn"),$("#since").text(a[2]).addClass("fadeIn"),setTimeout(function(){var d,e,f;d=n(b,"h:m a").format("X"),e=n(c,"h:m a").format("X"),f=n(a[1],"h:m a").format("X"),f>=d&&e>=f?($(".time .fa").removeClass("fa-moon-o fa-circle-o"),$(".time .fa").addClass("fa-sun-o")):($(".time .fa").removeClass("fa-sun-o fa-circle-o"),$(".time .fa").addClass("fa-moon-o"))},3e3),$(".top-container").addClass("fadeIn")}});break;case"ping":$.ajax(i,{method:"GET",data:{action:d},error:function(a,b){return o(b)},success:function(a){return o(a)}})}$(".val").each(function(){$(this).on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("fadeIn")})})},l=function(){return h(),$(".top-container").addClass("animated"),$(".bottom-container").addClass("animated"),$(".val").addClass("animated"),$(".button").addClass("animated"),p("image"),p("location"),p("uptime"),p("time")},$(function(){l(),setInterval(function(){p("uptime"),p("time")},6e4),setInterval(function(){p("ping")},3e5),$(".button").each(function(){$(this).on("click",function(){var a;a=$(this).attr("data-action"),d(a)})}),$("#location").on("click",function(){var a;a=$(this).attr("data-latlong"),window.location.href="https://www.google.com/maps/place/"+a})})}).call(this);