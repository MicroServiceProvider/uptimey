(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;p="https://github.com/stefanbc/uptimey",g="./client/lib/models/data.php",e="./client/bin/config.json",m=require("moment"),q="",h=q.globalLocation,i=q.globalSunrise,j=q.globalSunset,n=function(a){return $(".notice").remove(),$("body").append("<div class='fadeIn notice'>"+a+"</div>")},c=function(a){return $(a).addClass("pulse"),$(a).on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("pulse")})},l=function(a){return!isNaN(parseFloat(a))},f=function(a){var b,c;if("number"==typeof a||"boolean"==typeof a)return!1;if("undefined"==typeof a||null===a)return!0;if("undefined"!=typeof a.length)return 0===a.length;b=0;for(c in a)a.hasOwnProperty(c)&&b++;return 0===b},a=function(a){var b,d,e,f,h;switch(e="",a){case"toggle":e=$(".toggle-button").attr("data-status"),"closed"===e?($(".button-container").animate({top:0}),$(".toggle-button").attr("data-status","open"),$(".toggle-button").removeClass("fa-angle-double-down"),$(".toggle-button").addClass("fa-angle-double-up")):"open"===e&&($(".button-container").animate({top:"-80px"}),$(".toggle-button").attr("data-status","closed"),$(".toggle-button").removeClass("fa-angle-double-up"),$(".toggle-button").addClass("fa-angle-double-down"));break;case"advanced":c(".advanced-button"),e=$(".advanced-button").attr("data-status"),"default"===e?($(".advanced-button").attr("data-status","advanced"),$(".advanced-button").addClass("active"),$(".default-panel").fadeOut(500),$(".advanced-panel").fadeIn(500),$.ajax(g,{method:"GET",data:{action:"advanced",flag:"advanced"},success:function(a){$(".advanced-panel .top-container").html(a)}})):"advanced"===e&&($(".advanced-button").attr("data-status","default"),$(".advanced-button").removeClass("active"),$(".advanced-panel").fadeOut(500),$(".default-panel").fadeIn(500));break;case"refresh":$(".refresh-button").addClass("fa-spin"),o("uptime","refresh"),o("time","refresh"),o("ping"),setTimeout(function(){$(".refresh-button").removeClass("fa-spin")},1e3);break;case"twitter":c(".twitter-button"),h="",0!==$("#days").attr("data-value")&&(h+=$("#days").attr("data-value")+" days "),0!==$("#hours").attr("data-value")&&(h+=$("#hours").attr("data-value")+" hours "),0!==$("#minutes").attr("data-value")&&(h+=$("#minutes").attr("data-value")+" minutes"),f=h+" server uptime. Can you beat this? via",b="uptimey,devops",window.open("http://twitter.com/share?url="+p+"&text="+f+"&hashtags="+b+"&","twitterwindow","height=450, width=550, top="+($(window).height()/2-225)+", left="+$(window).width()/2+", toolbar=0, location=0, menubar=0, directories=0, scrollbars=0");break;case"screenshot":d=$(".screenshot-button"),c(d),d.hasClass("fa-camera")?(d.removeClass("fa-camera").addClass("fa-download"),html2canvas(document.body,{onrendered:function(a){var b,c;b=a.toDataURL("image/png").replace("image/png","image/octet-stream"),d.attr("href",b),c=m().format("DDMMYYYYHHmmss"),d.attr("download","Screenshot_"+c+".png")}})):setTimeout(function(){return d.removeClass("fa-download").addClass("fa-camera"),d.removeAttr("href").removeAttr("download")},3e3);break;case"clear":$.ajax(g,{method:"GET",data:{action:"clear"}})}},r=function(){var a;return a=document.createElement("style"),a.appendChild(document.createTextNode("")),document.head.appendChild(a),a.sheet}(),b=function(a,b,c,d){"insertRule"in a?a.insertRule(b+"{"+c+"}",d):"addRule"in a&&a.addRule(b,c,d)},d=function(){$.ajax(g,{method:"GET",data:{action:"override",flag:"override"},error:function(a){return console.log(a)},success:function(c){var e,g;d=$.parseJSON(c),f(d.background_color)||(e="background-color: "+d.background_color+";"),f(d.font_family)||(e+="font-family: "+d.font_family+";"),f(d.font_color)||(e+="color: "+d.font_color+";"),b(r,"body",e,0),d.remove_menu===!0&&(g="display: none",b(r,".button-container",g,0)),"advanced"===d.default_view&&a("advanced"),d.show_menu_always===!0&&a("toggle")}})},o=function(a,b){var c;switch(a){case"image":$.ajax(g,{method:"GET",data:{action:a},success:function(a){a=a.split(";"),$("body").css("backgroundImage","url("+a[0]+")")}}),c="Made with <a href='"+p+"' target='_blank'>Uptimey</a>. ",c+="Image from <a href='http://unsplash.com' target='_blank'>Unsplash</a>.",$("#copy").html(c);break;case"location":$.ajax(g,{method:"GET",data:{action:a},success:function(a){var b;b="http://ipinfo.io/"+a,$.getJSON(b,function(a){var b;$("#location").text(a.city+", "+a.region+", "+a.country).addClass("fadeIn"),b=a.loc.split(","),$("#location").attr("data-latlong",b[0]+"+"+b[1]),h=a.city+", "+a.region+", "+a.country,$.simpleWeather({location:h,success:function(a){i=a.sunrise,j=a.sunset}})}),$(".location-inner").addClass("fadeIn")}});break;case"uptime":$.ajax(g,{method:"GET",data:{action:a,flag:b},success:function(a){a=a.split(";"),$("#days").text(a[0]).addClass("fadeIn"),$("#days").attr("data-value",a[0]),$("#hours").text(a[1]).addClass("fadeIn"),$("#hours").attr("data-value",a[1]),$("#minutes").text(a[2]).addClass("fadeIn"),$("#minutes").attr("data-value",a[2]),$(".bottom-container").addClass("fadeIn")}});break;case"time":$.ajax(g,{method:"GET",data:{action:a,flag:b},success:function(a){var b;a=a.split(";"),$("#current").text(a[0]).addClass("fadeIn"),b=a[1].split(":"),$("#time").html(b[0]+"<span class='blink'>:</span>"+b[1]).addClass("fadeIn"),$("#since").text(a[2]).addClass("fadeIn"),setTimeout(function(){var b,c,d;b=m(i,"h:m a").format("X"),c=m(j,"h:m a").format("X"),d=m(a[1],"h:m a").format("X"),d>=b&&c>=d?($(".time .fa").removeClass("fa-moon-o fa-circle-o"),$(".time .fa").addClass("fa-sun-o")):($(".time .fa").removeClass("fa-sun-o fa-circle-o"),$(".time .fa").addClass("fa-moon-o"))},3e3),$(".top-container").addClass("fadeIn")}});break;case"ping":$.ajax(g,{method:"GET",data:{action:a},error:function(a,b){return n(b)},success:function(a){return n(a)}})}$(".val").each(function(){$(this).on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("fadeIn")})})},k=function(){return d(),$(".top-container").addClass("animated"),$(".bottom-container").addClass("animated"),$(".val").addClass("animated"),$(".button").addClass("animated"),o("image"),o("location"),o("uptime"),o("time"),o("ping")},$(function(){k(),setInterval(function(){o("uptime"),o("time"),o("ping")},6e4),$(".button").each(function(){$(this).on("click",function(){var b;b=$(this).attr("data-action"),a(b)})}),$("#location").on("click",function(){var a;a=$(this).attr("data-latlong"),window.location.href="https://www.google.com/maps/place/"+a})})}).call(this);